<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>kwon&#39;s Blog</title>
  <icon>https://www.gravatar.com/avatar/5594e9f17b4feb6e10a6bc1e7107ab0b</icon>
  <subtitle>개발 블로그</subtitle>
  <link href="/feed.xml" rel="self"/>
  
  <link href="https://kyu9341.github.io/"/>
  <updated>2020-04-17T16:19:17.989Z</updated>
  <id>https://kyu9341.github.io/</id>
  
  <author>
    <name>kwon</name>
    <email>kyu9341@naver.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>프로그래머스 - 여행경로</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/18/programmers_43164/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/18/programmers_43164/</id>
    <published>2020-04-17T15:11:12.000Z</published>
    <updated>2020-04-17T16:19:17.989Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-여행경로"><a href="#프로그래머스-여행경로" class="headerlink" title="프로그래머스 - 여행경로"></a>프로그래머스 - 여행경로</h1><h2 id="여행경로"><a href="#여행경로" class="headerlink" title="여행경로"></a>여행경로</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>주어진 항공권을 모두 이용하여 여행경로를 짜려고 합니다. 항상 ICN 공항에서 출발합니다.</p><p>항공권 정보가 담긴 2차원 배열 tickets가 매개변수로 주어질 때, 방문하는 공항 경로를 배열에 담아 return 하도록 solution 함수를 작성해주세요.</p><h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><ul><li>모든 공항은 알파벳 대문자 3글자로 이루어집니다.</li><li>주어진 공항 수는 3개 이상 10,000개 이하입니다.</li><li>tickets의 각 행 [a, b]는 a 공항에서 b 공항으로 가는 항공권이 있다는 의미입니다.</li><li>주어진 항공권은 모두 사용해야 합니다.</li><li>만일 가능한 경로가 2개 이상일 경우 알파벳 순서가 앞서는 경로를 return 합니다.</li><li>모든 도시를 방문할 수 없는 경우는 주어지지 않습니다.</li></ul><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>tickets    return<br>[[ICN, JFK], [HND, IAD], [JFK, HND]]    [ICN, JFK, HND, IAD]<br>[[ICN, SFO], [ICN, ATL], [SFO, ATL], [ATL, ICN], [ATL,SFO]]    [ICN, ATL, ICN, SFO, ATL, SFO]</p><h3 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h3><ul><li>예제 #1<ul><li>[ICN, JFK, HND, IAD] 순으로 방문할 수 있습니다.</li></ul></li><li>예제 #2<ul><li>[ICN, SFO, ATL, ICN, ATL, SFO] 순으로 방문할 수도 있지만 [ICN, ATL, ICN, SFO, ATL, SFO] 가 알파벳 순으로 앞섭니다.</li></ul></li></ul><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/43164" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/43164</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>dfs를 사용하여 tickets배열을 매번 모두 탐색하며 다음 출발지가 현재 위치와 일치하는 아직 사용하지 않은 티켓이 있는지 확인한다.<ul><li>조건을 만족하는 티켓이 있다면 티켓을 사용처리(visit[i] = true) 하고 재귀를 수행한다.</li></ul></li><li>모든 티켓을 사용한 경우 재귀를 종료한다.</li><li>시작 지점은 항상 “ICN”이다.</li><li>방문 순서는 알파벳 순으로 앞서는 경우를 출력해야 하므로 dfs수행 전에 tickets벡터를 먼저 정렬한다.</li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">bool</span> visit[MAX + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="built_in">string</span> node, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt;&amp; tickets, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; answer, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">answer.push_back(node);</span><br><span class="line"><span class="keyword">if</span> (index == tickets.<span class="built_in">size</span>()) &#123; <span class="comment">// 모든 티켓을 사용한 경우</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tickets.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="built_in">string</span> next = tickets[i][<span class="number">1</span>];</span><br><span class="line"><span class="built_in">string</span> now = tickets[i][<span class="number">0</span>];</span><br><span class="line"><span class="comment">// 다음 출발지가 현재 위치와 일치하는 아직 사용하지 않은 티켓이 있는지 확인</span></span><br><span class="line"><span class="keyword">if</span> (now == node &amp;&amp; visit[i] == <span class="literal">false</span>) &#123;</span><br><span class="line">visit[i] = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span> (dfs(next, tickets, answer, index + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">visit[i] = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">answer.pop_back();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; solution(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; tickets) &#123;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; answer;</span><br><span class="line">sort(tickets.<span class="built_in">begin</span>(), tickets.<span class="built_in">end</span>());</span><br><span class="line">dfs(<span class="string">"ICN"</span>, tickets, answer, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-여행경로&quot;&gt;&lt;a href=&quot;#프로그래머스-여행경로&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 여행경로&quot;&gt;&lt;/a&gt;프로그래머스 - 여행경로&lt;/h1&gt;&lt;h2 id=&quot;여행경로&quot;&gt;&lt;a href=&quot;#여행경로&quot; cla
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - 숫자 야구</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/18/programmers_42841/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/18/programmers_42841/</id>
    <published>2020-04-17T15:11:12.000Z</published>
    <updated>2020-04-19T06:50:06.294Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-숫자-야구"><a href="#프로그래머스-숫자-야구" class="headerlink" title="프로그래머스 - 숫자 야구"></a>프로그래머스 - 숫자 야구</h1><h2 id="숫자-야구"><a href="#숫자-야구" class="headerlink" title="숫자 야구"></a>숫자 야구</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>숫자 야구 게임이란 2명이 서로가 생각한 숫자를 맞추는 게임입니다.</p><p>각자 서로 다른 1~9까지 3자리 임의의 숫자를 정한 뒤 서로에게 3자리의 숫자를 불러서 결과를 확인합니다. 그리고 그 결과를 토대로 상대가 정한 숫자를 예상한 뒤 맞힙니다.</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>숫자는 맞지만, 위치가 틀렸을 때는 볼</span><br><span class="line"><span class="bullet">* </span>숫자와 위치가 모두 맞을 때는 스트라이크</span><br><span class="line"><span class="bullet">* </span>숫자와 위치가 모두 틀렸을 때는 아웃</span><br></pre></td></tr></table></figure><p>예를 들어, 아래의 경우가 있으면</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">A :</span> <span class="number">123</span></span><br><span class="line"><span class="attr">B :</span> <span class="number">1</span><span class="string">스트라이크</span> <span class="number">1</span><span class="string">볼.</span></span><br><span class="line"><span class="attr">A :</span> <span class="number">356</span></span><br><span class="line"><span class="attr">B :</span> <span class="number">1</span><span class="string">스트라이크</span> <span class="number">0</span><span class="string">볼.</span></span><br><span class="line"><span class="attr">A :</span> <span class="number">327</span></span><br><span class="line"><span class="attr">B :</span> <span class="number">2</span><span class="string">스트라이크</span> <span class="number">0</span><span class="string">볼.</span></span><br><span class="line"><span class="attr">A :</span> <span class="number">489</span></span><br><span class="line"><span class="attr">B :</span> <span class="number">0</span><span class="string">스트라이크</span> <span class="number">1</span><span class="string">볼.</span></span><br></pre></td></tr></table></figure><p>이때 가능한 답은 324와 328 두 가지입니다.</p><p>질문한 세 자리의 수, 스트라이크의 수, 볼의 수를 담은 2차원 배열 baseball이 매개변수로 주어질 때, 가능한 답의 개수를 return 하도록 solution 함수를 작성해주세요.</p><h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><p>질문의 수는 1 이상 100 이하의 자연수입니다.<br>baseball의 각 행은 [세 자리의 수, 스트라이크의 수, 볼의 수] 를 담고 있습니다.</p><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>baseball    return<br>[[123, 1, 1], [356, 1, 0], [327, 2, 0], [489, 0, 1]]    2</p><h3 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h3><p>문제에 나온 예와 같습니다.</p><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/42841" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/42841</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>1~9의 숫자를 중복 없이 사용하므로 가능한 경우는 최소 123 ~ 최대 987 이다.</li><li>123~987을 모두 확인하며 현재 숫자가 주어진 조건을 모두 만족한다면 answer를 1증가시키고 아니라면 넘어간다.<ul><li>먼저, 중복되는 숫자는 없으므로 같은 숫자가 있는 경우와 0이 들어가는 경우는 넘어간다.</li><li>숫자를 모두 문자열로 변환하여 비교를 하며 현재 숫자가 이번 경우의 스트라이크와 볼의 수를 만족한다면 계속 확인하고 하나라도 만족하지 않는다면 다음 숫자로 넘어간다.</li><li>모든 조건을 만족하면 answer를 1증가시킨다.</li></ul></li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; baseball)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1~9의 숫자이므로 가능한 모든 범위는 123 ~ 987</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">123</span>; i &lt;= <span class="number">987</span>; i++) &#123;</span><br><span class="line"><span class="built_in">string</span> cur = to_string(i);</span><br><span class="line"><span class="comment">// 모두 서로 다른 숫자이므로 같은 숫자가 있는 경우는 확인 안함</span></span><br><span class="line"><span class="keyword">if</span> (cur[<span class="number">0</span>] == cur[<span class="number">1</span>] || cur[<span class="number">1</span>] == cur[<span class="number">2</span>] || cur[<span class="number">0</span>] == cur[<span class="number">2</span>]) <span class="keyword">continue</span>;</span><br><span class="line"><span class="comment">// 0이 있는 경우는 불가능</span></span><br><span class="line"><span class="keyword">if</span> (cur[<span class="number">0</span>] == <span class="string">'0'</span> || cur[<span class="number">1</span>] == <span class="string">'0'</span> || cur[<span class="number">2</span>] == <span class="string">'0'</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 조건을 만족하는지 확인할 변수</span></span><br><span class="line"><span class="keyword">bool</span> check = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; baseball.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line"><span class="built_in">string</span> num = to_string(baseball[j][<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">int</span> s = <span class="number">0</span>; <span class="comment">// 스트라이크</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">0</span>; <span class="comment">// 볼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">3</span>; k++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>; l &lt; <span class="number">3</span>; l++) &#123;</span><br><span class="line"><span class="comment">// 스트라이크인 경우</span></span><br><span class="line"><span class="keyword">if</span> (k == l &amp;&amp; num[k] == cur[l]) s++;</span><br><span class="line"><span class="comment">// 볼인 경우</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (num[k] == cur[l]) b++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 현재 조건을 만족하는지 확인</span></span><br><span class="line"><span class="keyword">if</span> (s != baseball[j][<span class="number">1</span>] || b != baseball[j][<span class="number">2</span>]) &#123;</span><br><span class="line">check = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (check) answer++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-숫자-야구&quot;&gt;&lt;a href=&quot;#프로그래머스-숫자-야구&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 숫자 야구&quot;&gt;&lt;/a&gt;프로그래머스 - 숫자 야구&lt;/h1&gt;&lt;h2 id=&quot;숫자-야구&quot;&gt;&lt;a href=&quot;#숫자-야
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - 체육복</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/17/programmers_42862/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/17/programmers_42862/</id>
    <published>2020-04-17T04:21:12.000Z</published>
    <updated>2020-04-17T04:33:23.807Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-체육복"><a href="#프로그래머스-체육복" class="headerlink" title="프로그래머스 - 체육복"></a>프로그래머스 - 체육복</h1><h2 id="체육복"><a href="#체육복" class="headerlink" title="체육복"></a>체육복</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>점심시간에 도둑이 들어, 일부 학생이 체육복을 도난당했습니다. 다행히 여벌 체육복이 있는 학생이 이들에게 체육복을 빌려주려 합니다. 학생들의 번호는 체격 순으로 매겨져 있어, 바로 앞번호의 학생이나 바로 뒷번호의 학생에게만 체육복을 빌려줄 수 있습니다. 예를 들어, 4번 학생은 3번 학생이나 5번 학생에게만 체육복을 빌려줄 수 있습니다. 체육복이 없으면 수업을 들을 수 없기 때문에 체육복을 적절히 빌려 최대한 많은 학생이 체육수업을 들어야 합니다.</p><p>전체 학생의 수 n, 체육복을 도난당한 학생들의 번호가 담긴 배열 lost, 여벌의 체육복을 가져온 학생들의 번호가 담긴 배열 reserve가 매개변수로 주어질 때, 체육수업을 들을 수 있는 학생의 최댓값을 return 하도록 solution 함수를 작성해주세요.</p><h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><ul><li>전체 학생의 수는 2명 이상 30명 이하입니다.</li><li>체육복을 도난당한 학생의 수는 1명 이상 n명 이하이고 중복되는 번호는 없습니다.</li><li>여벌의 체육복을 가져온 학생의 수는 1명 이상 n명 이하이고 중복되는 번호는 없습니다.</li><li>여벌 체육복이 있는 학생만 다른 학생에게 체육복을 빌려줄 수 있습니다.</li><li>여벌 체육복을 가져온 학생이 체육복을 도난당했을 수 있습니다. 이때 이 학생은 체육복을 하나만 도난당했다고 가정하며, 남은 체육복이 하나이기에 다른 학생에게는 체육복을 빌려줄 수 없습니다.</li></ul><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>n    lost    reserve    return<br>5    [2, 4]    [1, 3, 5]    5<br>5    [2, 4]    [3]    4<br>3    [3]    [1]    2</p><h3 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h3><ul><li><p>예제 #1</p><ul><li>1번 학생이 2번 학생에게 체육복을 빌려주고, 3번 학생이나 5번 학생이 4번 학생에게 체육복을 빌려주면 학생 5명이 체육수업을 들을 수 있습니다.</li></ul></li><li><p>예제 #2</p><ul><li>3번 학생이 2번 학생이나 4번 학생에게 체육복을 빌려주면 학생 4명이 체육수업을 들을 수 있습니다.</li></ul></li></ul><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/42862" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/42862</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>전체 학생의 상태를 담는 벡터 v를 생성, 0으로 초기화, 인덱스는 학생의 번호<ul><li>여벌이 없고 잃어버리지도 않은 학생은 0</li><li>체육복을 잃어버린 학생은 -1</li><li>여벌 체육복이 있는 학생은 1, 단, 여벌 체육복을 가져왔는데 잃어버렸다면 0</li></ul></li><li>위와 같이 학생의 상태를 결정하고 v를 확인하며<ul><li>여벌이 있는 학생이라면 앞 학생이 잃어버린 학생인지 확인하고 잃어버렸다면 빌려준다.</li><li>앞 학생이 체육복이 있다면 뒷 학생이 잃어버렸는지 확인하고 잃어버렸다면 빌려준다.</li></ul></li><li>빌려준 뒤 없는 학생의 수만 전체 학생의 수에서 뺀다.</li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; lost, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; reserve)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 전체 학생의 상태를 담는 벡터</span></span><br><span class="line"><span class="comment">// 여벌이 없고 잃어버리지도 않은 학생은 0</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 체육복을 잃어버린 학생은 -1</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lost.<span class="built_in">size</span>(); i++)</span><br><span class="line">v[lost[i]] = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 여벌 체육복이 있는 학생은 1, 단, 여벌 체육복을 가져왔는데 잃어버렸다면 0</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; reserve.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (v[reserve[i]] == <span class="number">-1</span>) &#123;</span><br><span class="line">v[reserve[i]] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">v[reserve[i]] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (v[i] == <span class="number">1</span>) &#123; <span class="comment">// 여벌이 있는 학생인 경우</span></span><br><span class="line"><span class="keyword">if</span> (i &gt;= <span class="number">2</span> &amp;&amp; v[i - <span class="number">1</span>] == <span class="number">-1</span>) &#123; <span class="comment">// 앞 학생이 없다면 빌려준다.</span></span><br><span class="line">v[i] = <span class="number">0</span>;</span><br><span class="line">v[i - <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (i + <span class="number">1</span> &lt;= <span class="number">30</span> &amp;&amp; v[i + <span class="number">1</span>] == <span class="number">-1</span>) &#123; <span class="comment">// 앞 학생이 있고 뒷 학생이 없다면 빌려준다.</span></span><br><span class="line">v[i] = <span class="number">0</span>;</span><br><span class="line">v[i + <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">answer = n;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (v[i] == <span class="number">-1</span>) answer--; <span class="comment">// 빌려준 뒤 없는 학생의 수만 전체 학생의 수에서 뺀다.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-체육복&quot;&gt;&lt;a href=&quot;#프로그래머스-체육복&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 체육복&quot;&gt;&lt;/a&gt;프로그래머스 - 체육복&lt;/h1&gt;&lt;h2 id=&quot;체육복&quot;&gt;&lt;a href=&quot;#체육복&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - 소수 찾기</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/17/programmers_42839/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/17/programmers_42839/</id>
    <published>2020-04-17T03:51:12.000Z</published>
    <updated>2020-04-17T04:05:42.925Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-소수-찾기"><a href="#프로그래머스-소수-찾기" class="headerlink" title="프로그래머스 - 소수 찾기"></a>프로그래머스 - 소수 찾기</h1><h2 id="소수-찾기"><a href="#소수-찾기" class="headerlink" title="소수 찾기"></a>소수 찾기</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>한자리 숫자가 적힌 종이 조각이 흩어져있습니다. 흩어진 종이 조각을 붙여 소수를 몇 개 만들 수 있는지 알아내려 합니다.</p><p>각 종이 조각에 적힌 숫자가 적힌 문자열 numbers가 주어졌을 때, 종이 조각으로 만들 수 있는 소수가 몇 개인지 return 하도록 solution 함수를 완성해주세요.</p><h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><ul><li><p>numbers는 길이 1 이상 7 이하인 문자열입니다.</p></li><li><p>numbers는 0~9까지 숫자만으로 이루어져 있습니다.</p></li><li><p>013은 0, 1, 3 숫자가 적힌 종이 조각이 흩어져있다는 의미입니다.</p><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>numbers    return<br>17    3<br>011    2</p><h3 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h3></li><li><p>예제 #1</p><ul><li>[1, 7]으로는 소수 [7, 17, 71]를 만들 수 있습니다.</li></ul></li><li><p>예제 #2</p><ul><li>[0, 1, 1]으로는 소수 [11, 101]를 만들 수 있습니다.</li></ul></li></ul><p>11과 011은 같은 숫자로 취급합니다.</p><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/42839" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/42839</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>에라토스테네스의 체를 이용하여 소수를 구하고 재귀로 순열을 구현하여 해결하였다.</li><li>numbers문자열에 각 수를 하나씩 추가해보며 재귀를 수행하고 현재 문자열이 빈 문자열이 아니고 중복되지 않은 경우 카운트한다.<ul><li>이때, 이미 사용한 인덱스의 수를 사용하지 않도록 check배열에 기록한다.</li></ul></li><li>또한 같은 수가 두 번 카운트되면 안되므로 visit배열을 사용하여 한 번 확인한 수는 다시 확인하지 않는다.</li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">10000000</span>;</span><br><span class="line"><span class="keyword">bool</span> check[<span class="number">8</span>];</span><br><span class="line"><span class="keyword">bool</span> prime[MAX];</span><br><span class="line"><span class="keyword">bool</span> visit[MAX];</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">go</span><span class="params">(<span class="keyword">int</span> index, <span class="built_in">string</span> numbers, <span class="built_in">string</span> cur)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 현재 문자열이 빈 문자열이 아니고 중복되지 않은 경우</span></span><br><span class="line"><span class="keyword">if</span> (cur != <span class="string">""</span> &amp;&amp; !visit[stoi(cur)]) &#123;</span><br><span class="line"><span class="keyword">int</span> num = stoi(cur);</span><br><span class="line"><span class="keyword">if</span> (!visit[num]) &#123;</span><br><span class="line">visit[num] = <span class="literal">true</span>; <span class="comment">// 방문 처리</span></span><br><span class="line"><span class="keyword">if</span> (!prime[num])cnt++; <span class="comment">// 소수인 경우 카운트</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numbers.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (check[i]) <span class="keyword">continue</span>; <span class="comment">// 이미 사용한 수이면 통과</span></span><br><span class="line">check[i] = <span class="literal">true</span>;</span><br><span class="line">go(index + <span class="number">1</span>, numbers, cur + numbers[i]);</span><br><span class="line">check[i] = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="built_in">string</span> numbers)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">prime[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">prime[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 에라토스테네스의 체</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i * i &lt; MAX; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (prime[i] == <span class="literal">false</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = i + i; j &lt; MAX; j += i) &#123;</span><br><span class="line">prime[j] = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">go(<span class="number">0</span>, numbers, <span class="string">""</span>);</span><br><span class="line">answer = cnt;</span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-소수-찾기&quot;&gt;&lt;a href=&quot;#프로그래머스-소수-찾기&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 소수 찾기&quot;&gt;&lt;/a&gt;프로그래머스 - 소수 찾기&lt;/h1&gt;&lt;h2 id=&quot;소수-찾기&quot;&gt;&lt;a href=&quot;#소수-찾
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - 네트워크</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/16/programmers_43237/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/16/programmers_43237/</id>
    <published>2020-04-15T15:51:12.000Z</published>
    <updated>2020-04-15T16:06:48.496Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-네트워크"><a href="#프로그래머스-네트워크" class="headerlink" title="프로그래머스 - 네트워크"></a>프로그래머스 - 네트워크</h1><h2 id="네트워크"><a href="#네트워크" class="headerlink" title="네트워크"></a>네트워크</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>네트워크란 컴퓨터 상호 간에 정보를 교환할 수 있도록 연결된 형태를 의미합니다. 예를 들어, 컴퓨터 A와 컴퓨터 B가 직접적으로 연결되어있고, 컴퓨터 B와 컴퓨터 C가 직접적으로 연결되어 있을 때 컴퓨터 A와 컴퓨터 C도 간접적으로 연결되어 정보를 교환할 수 있습니다. 따라서 컴퓨터 A, B, C는 모두 같은 네트워크 상에 있다고 할 수 있습니다.</p><p>컴퓨터의 개수 n, 연결에 대한 정보가 담긴 2차원 배열 computers가 매개변수로 주어질 때, 네트워크의 개수를 return 하도록 solution 함수를 작성하시오.</p><h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><ul><li>컴퓨터의 개수 n은 1 이상 200 이하인 자연수입니다.</li><li>각 컴퓨터는 0부터 n-1인 정수로 표현합니다.</li><li>i번 컴퓨터와 j번 컴퓨터가 연결되어 있으면 computers[i][j]를 1로 표현합니다.</li><li>computer[i][i]는 항상 1입니다.</li></ul><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>n    computers    return<br>3    [[1, 1, 0], [1, 1, 0], [0, 0, 1]]    2<br>3    [[1, 1, 0], [1, 1, 1], [0, 1, 1]]    1</p><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/43162" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/43162</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>백준의 11724번 문제와 거의 똑같은 문제이다.<ul><li><a href="https://kyu9341.github.io/algorithm/2020/02/26/algorithm11724/">https://kyu9341.github.io/algorithm/2020/02/26/algorithm11724/</a></li></ul></li><li>dfs 또는 bfs를 사용하여 해결할 수 있다. 여기서는 dfs를 사용하였다.<ul><li>새로운 벡터에 네트워크의 연결 정보를 새로 담고, dfs를 통해 현재 노드에서 연결된 모든 노드를 체크한다.</li><li>체크되지 않은 노드인 경우에만 다시 dfs를 수행하여 dfs가 실행된 횟수를 구하면 그게 네트워크의 개수이다.</li></ul></li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> check[<span class="number">200</span>]; <span class="comment">// 탐색된 노드인지 판별하기 위한 배열</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a[<span class="number">200</span>]; <span class="comment">// 네트워크 연결 정보를 저장하기 위한 벡터</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> node, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">check[node] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a[node].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">int</span> next = a[node][i];</span><br><span class="line"><span class="keyword">if</span> (!check[next]) &#123;</span><br><span class="line">dfs(next, n);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; computers)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (i == j) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span> (computers[i][j]) &#123;</span><br><span class="line">a[i].push_back(j); <span class="comment">// 연결</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (!check[i]) &#123; <span class="comment">// 아직 연결되지 않은 노드만 탐색</span></span><br><span class="line">answer++; <span class="comment">// 네트워크의 개수 카운트</span></span><br><span class="line">dfs(i, n);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-네트워크&quot;&gt;&lt;a href=&quot;#프로그래머스-네트워크&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 네트워크&quot;&gt;&lt;/a&gt;프로그래머스 - 네트워크&lt;/h1&gt;&lt;h2 id=&quot;네트워크&quot;&gt;&lt;a href=&quot;#네트워크&quot; cla
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 - 스프링 시큐리티 설정 커스터마이징</title>
    <link href="https://kyu9341.github.io/java/2020/04/15/java_springBootSecurity2/"/>
    <id>https://kyu9341.github.io/java/2020/04/15/java_springBootSecurity2/</id>
    <published>2020-04-15T04:12:28.000Z</published>
    <updated>2020-04-15T04:48:03.076Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-스프링-시큐리티-설정-커스터마이징"><a href="#스프링-부트-스프링-시큐리티-설정-커스터마이징" class="headerlink" title="스프링 부트 - 스프링 시큐리티 설정 커스터마이징"></a>스프링 부트 - 스프링 시큐리티 설정 커스터마이징</h2><ul><li>웹 시큐리티 설정<ul><li><code>WebSecurityConfigurerAdapter</code>를 상속받아 시큐리티 관련 설정을 할 수 있다.</li></ul></li><li><code>UserDetailsServie</code> 구현</li><li><code>PasswordEncoder</code> 설정 및 사용</li></ul><ul><li>의존성 추가<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>스프링 시큐리티와 타임리프, H2 의존성을 추가한다.</li></ul><hr><ul><li><p><code>Application.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>HomeController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/my"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">my</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"my"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>SecurityConfig.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">"/"</span>, <span class="string">"/hello"</span>).permitAll() <span class="comment">// 루트랑 hello만 인가</span></span><br><span class="line">                .anyRequest().authenticated() <span class="comment">// 나머지 모든 요청은 인증이 필요</span></span><br><span class="line">                .and()</span><br><span class="line">                .formLogin()     <span class="comment">// form로그인을 사용할 것</span></span><br><span class="line">                .and()</span><br><span class="line">                .httpBasic();   <span class="comment">// httpBasic authentication을 사용할 것이다.</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>WebSecurityConfigurerAdapter</code>를 상속받고 <code>configure</code>메서드를 오버라이딩하여 시큐리티 설정을 커스터마이징 할 수 있다.</p></li><li><p><code>/</code>(root) 와 <code>/hello</code>에 접근할 때를 제외하고 나머지 모든 요청에 대해 인증이 필요하고, formLogin과 httpBasic을 통한 인증을 하도록 설정했다.</p></li></ul><hr><ul><li><code>index.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Spring Security<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/hello"</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/my"</span>&gt;</span>my<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>hello.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>my.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>My<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li>위와 같이 설정하면 이전 포스팅에서와 달리 모든 요청에 대해 로그인 페이지로 이동하지 않고, <code>/my</code>로 요청을 보낸 경우에만 로그인 페이지로 이동하게 된다.</li></ul><h4 id="H2-DB를-통한-유저-정보-생성-및-인증"><a href="#H2-DB를-통한-유저-정보-생성-및-인증" class="headerlink" title="H2 DB를 통한 유저 정보 생성 및 인증"></a>H2 DB를 통한 유저 정보 생성 및 인증</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>사용자 계정에 대한 정보를 담는 Account클래스 생성</li><li>DB와 어플리케이션 간의 데이터 이동이 있을 때 그 데이터에 대한 정보를 담고 있는 객체의 클래스이다.<ul><li>DTO (Data Transfer Object) 라고 한다.</li></ul></li></ul><ul><li><code>SecurityConfig.java</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">"/"</span>, <span class="string">"/hello"</span>).permitAll() <span class="comment">// 루트랑 hello만 인가</span></span><br><span class="line">                .anyRequest().authenticated() <span class="comment">// 나머지 모든 요청은 인증이 필요</span></span><br><span class="line">                .and()</span><br><span class="line">                .formLogin()     <span class="comment">// form로그인을 사용할 것</span></span><br><span class="line">                .and()</span><br><span class="line">                .httpBasic();   <span class="comment">// httpBasic authentication을 사용할 것이다.</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span></span>&#123; <span class="comment">// 패스워드 인코더</span></span><br><span class="line">        <span class="keyword">return</span> PasswordEncoderFactories.createDelegatingPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>시큐리티 설정을 관리하는 클래스에 패스워드 인코더를 추가</li></ul><ul><li><p><code>AccountRunner.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountRunner</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Account kwon = accountService.createAccount(<span class="string">"kwon"</span>, <span class="string">"1234"</span>);</span><br><span class="line">        System.out.println(kwon.getUsername() + <span class="string">" password : "</span> + kwon.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>애플리케이션 실행 시 username이 kwon이고 password가 1234인 계정 정보를 생성하는 코드</p><ul><li>H2 데이터베이스에 저장된다.</li></ul></li><li><p><code>AccountRepository.java</code>인터페이스 생성</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Account</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">Optional&lt;Account&gt; <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>JpaRepository를 상속하여 DB에 의해 관리되는 데이터를 추상화된 형태로 접근할 수 있다.</p></li><li><p>findByUsername이라는 메서드를 생성하여 nsername을 기준으로 사용자 데이터를 가져올 수 있다.</p></li></ul><ul><li><p><code>AccountService.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountRepository accountRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 주어진 정보로 리포지토리에 저장</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Account <span class="title">createAccount</span><span class="params">(String username, String password)</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setUsername(username);</span><br><span class="line">        account.setPassword(passwordEncoder.encode(password)); <span class="comment">// 패스워드를 인코딩하여 저장</span></span><br><span class="line">        <span class="keyword">return</span> accountRepository.save(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// 입력받은 username에 해당하는 user정보를 확인하여 검증</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        Optional&lt;Account&gt; byUsername = accountRepository.findByUsername(username);</span><br><span class="line">        <span class="comment">// 실제 데이터가 없으면 username을 찾지 못했다는 예외를 던지고 있다면 값을 받아온다.</span></span><br><span class="line">        Account account = byUsername.orElseThrow(()-&gt;<span class="keyword">new</span> UsernameNotFoundException(username));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(account.getUsername(), account.getPassword(), authorities());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Collection&lt;? extends GrantedAuthority&gt; authorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.asList(<span class="keyword">new</span> SimpleGrantedAuthority(<span class="string">"ROLE_USER"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>createAccount</code>메서드는 주어진 정보로 계정을 생성하여 레포지토리에 저장한다.</p><ul><li>이때, 패스워드를 인코딩하여 저장하였다.</li></ul></li><li><p><code>UserDetailsService</code>는 반드시 구현해야 한다. 이 타입의 빈이 등록이 되어 있어야 스프링 부트가 자동으로 생성하는 유저가 생성이 안된다.</p><ul><li>보통 유저 정보들을 관리하는 서비스 계층에 구현을 한다.(여기서는 AccountService)</li><li>또는 서비스와 별개로 또 다른 클래스를 만들어서 그 클래스가 <code>UserDetailsService</code>인터페이스를 구현하도록해도 한다.</li></ul></li><li><p>로그인 시에 <code>UserDetailsService</code>가 가지고 있는 <code>loadUserByUsername</code> 메서드가 호출이 되고, 입력된 username이 들어와서 입력된 패스워드를 검증한다.</p></li><li><p>즉, 사용자가 보낸 정보와 DB에 존재하는 사용자 정보가 일치하는제 확인하는 역할을 수행한다.</p></li></ul><hr><ul><li>이제 애플리케이션을 실행하여 <code>/my</code>로 요청을 보내면 나오는 로그인 화면에서 위에서 설정한 username과 password로 로그인이 가능하다.</li></ul><div style="width: 410px; height: 360px;">    <img src="https://kyu9341.github.io/img/security4.png" style="width: 410px; height: 360px;"></div><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a><br><a href="https://engkimbs.tistory.com/807?category=767865" target="_blank" rel="external nofollow noopener noreferrer">https://engkimbs.tistory.com/807?category=767865</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-스프링-시큐리티-설정-커스터마이징&quot;&gt;&lt;a href=&quot;#스프링-부트-스프링-시큐리티-설정-커스터마이징&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 - 스프링 시큐리티 설정 커스터마이징&quot;&gt;&lt;/a&gt;스프링 부트 - 
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - 타겟 넘버</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/15/programmers_43165/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/15/programmers_43165/</id>
    <published>2020-04-14T15:01:12.000Z</published>
    <updated>2020-04-14T15:44:54.911Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-타겟-넘버"><a href="#프로그래머스-타겟-넘버" class="headerlink" title="프로그래머스 - 타겟 넘버"></a>프로그래머스 - 타겟 넘버</h1><h2 id="타겟-넘버"><a href="#타겟-넘버" class="headerlink" title="타겟 넘버"></a>타겟 넘버</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>n개의 음이 아닌 정수가 있습니다. 이 수를 적절히 더하거나 빼서 타겟 넘버를 만들려고 합니다. 예를 들어 [1, 1, 1, 1, 1]로 숫자 3을 만들려면 다음 다섯 방법을 쓸 수 있습니다.</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span> = <span class="number">3</span></span><br><span class="line">+<span class="number">1</span><span class="number">-1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span> = <span class="number">3</span></span><br><span class="line">+<span class="number">1</span>+<span class="number">1</span><span class="number">-1</span>+<span class="number">1</span>+<span class="number">1</span> = <span class="number">3</span></span><br><span class="line">+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span><span class="number">-1</span>+<span class="number">1</span> = <span class="number">3</span></span><br><span class="line">+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span><span class="number">-1</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure><p>사용할 수 있는 숫자가 담긴 배열 numbers, 타겟 넘버 target이 매개변수로 주어질 때 숫자를 적절히 더하고 빼서 타겟 넘버를 만드는 방법의 수를 return 하도록 solution 함수를 작성해주세요.</p><h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><p>주어지는 숫자의 개수는 2개 이상 20개 이하입니다.<br>각 숫자는 1 이상 50 이하인 자연수입니다.<br>타겟 넘버는 1 이상 1000 이하인 자연수입니다.</p><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>numbers    target    return<br>[1, 1, 1, 1, 1]    3    5<br>입출력 예 설명<br>문제에 나온 예와 같습니다.</p><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/43165" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/43165</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>DFS를 재귀함수로 구현하여 해결하였다.</li><li>index를 1씩 증가시키며 sum에 현재 index의 number를 더하는 경우, 빼는 경우를 구분하여 재귀를 수행한다.</li><li>index가 배열의 크기와 같아지면(주어진 수를 모두 확인) 현재까지의 합이 타겟 넘버와 일치하는지 확인한다.<ul><li>일치한다면 1을 리턴하고 아니라면 0을 리턴한다.</li></ul></li><li>반환되는 값을 모두 더하면 그것이 타겟 넘버를 만들 수 있는 모든 경우이다.</li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; numbers, <span class="keyword">int</span> target, <span class="keyword">int</span> index, <span class="keyword">int</span> sum, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (index == numbers.<span class="built_in">size</span>()) &#123;</span><br><span class="line"><span class="keyword">if</span> (sum == target) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// 타겟 넘버를 만든 경우</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// 만들지 못한 경우</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">count = dfs(numbers, target, index + <span class="number">1</span>, sum + numbers[index], count) + dfs(numbers, target, index + <span class="number">1</span>, sum - numbers[index], count);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; numbers, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">answer = dfs(numbers, target, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-타겟-넘버&quot;&gt;&lt;a href=&quot;#프로그래머스-타겟-넘버&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 타겟 넘버&quot;&gt;&lt;/a&gt;프로그래머스 - 타겟 넘버&lt;/h1&gt;&lt;h2 id=&quot;타겟-넘버&quot;&gt;&lt;a href=&quot;#타겟-넘
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - 모의고사</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/15/programmers_42840/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/15/programmers_42840/</id>
    <published>2020-04-14T15:00:12.000Z</published>
    <updated>2020-04-14T15:25:28.701Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-모의고사"><a href="#프로그래머스-모의고사" class="headerlink" title="프로그래머스 - 모의고사"></a>프로그래머스 - 모의고사</h1><h2 id="모의고사"><a href="#모의고사" class="headerlink" title="모의고사"></a>모의고사</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>수포자는 수학을 포기한 사람의 준말입니다. 수포자 삼인방은 모의고사에 수학 문제를 전부 찍으려 합니다. 수포자는 1번 문제부터 마지막 문제까지 다음과 같이 찍습니다.</p><p>1번 수포자가 찍는 방식: 1, 2, 3, 4, 5, 1, 2, 3, 4, 5, …<br>2번 수포자가 찍는 방식: 2, 1, 2, 3, 2, 4, 2, 5, 2, 1, 2, 3, 2, 4, 2, 5, …<br>3번 수포자가 찍는 방식: 3, 3, 1, 1, 2, 2, 4, 4, 5, 5, 3, 3, 1, 1, 2, 2, 4, 4, 5, 5, …</p><p>1번 문제부터 마지막 문제까지의 정답이 순서대로 들은 배열 answers가 주어졌을 때, 가장 많은 문제를 맞힌 사람이 누구인지 배열에 담아 return 하도록 solution 함수를 작성해주세요.</p><h3 id="제한-조건"><a href="#제한-조건" class="headerlink" title="제한 조건"></a>제한 조건</h3><p>시험은 최대 10,000 문제로 구성되어있습니다.<br>문제의 정답은 1, 2, 3, 4, 5중 하나입니다.<br>가장 높은 점수를 받은 사람이 여럿일 경우, return하는 값을 오름차순 정렬해주세요.</p><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>answers    return<br>[1,2,3,4,5]    [1]<br>[1,3,2,4,2]    [1,2,3]</p><h4 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h4><ul><li><p>입출력 예 #1</p><ul><li>수포자 1은 모든 문제를 맞혔습니다.</li><li>수포자 2는 모든 문제를 틀렸습니다.</li><li>수포자 3은 모든 문제를 틀렸습니다.</li><li>따라서 가장 문제를 많이 맞힌 사람은 수포자 1입니다.</li></ul></li><li><p>입출력 예 #2</p><ul><li>모든 사람이 2문제씩을 맞췄습니다.</li></ul></li></ul><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/42840" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/42840</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>각 수포자의 패턴을 배열로 저장하여 정답을 몇 개 맞췄는지를 카운트한다.<ul><li>각 수포자의 정담 수는 정답 벡터를 모두 확인하는데, 이때 수포자의 패턴이 담긴 배열의 인덱스에 나머지 연산자(%)를 이용하여 반복적으로 접근한다.</li></ul></li><li>각 수포자의 점수와 번호를 pair형 벡터에 담고 점수를 기준으로 내림차순, 점수가 같다면 번호를 오름차순으로 하도록 정렬한다.</li><li>이후 점수가 가장 높은 수포자와 다음 수포자의 점수가 같다면 순서대로 반환할 벡터에 추가하고 아니라면 정답을 가장 많이 맞춘 사람만 추가한다.</li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> answer1[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;; <span class="comment">// 1번 수포자의 패턴</span></span><br><span class="line"><span class="keyword">int</span> answer2[] = &#123; <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span> &#125;; <span class="comment">// 2번 수포자의 패턴</span></span><br><span class="line"><span class="keyword">int</span> answer3[] = &#123; <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span> &#125;; <span class="comment">// 3번 수포자의 패턴</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">count1</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; answers)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; answers.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (answers[i] == answer1[i % <span class="number">5</span>]) count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">count2</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; answers)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; answers.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (answers[i] == answer2[i % <span class="number">8</span>]) count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">count3</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; answers)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; answers.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (answers[i] == answer3[i % <span class="number">10</span>]) count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare</span><span class="params">(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; u, pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; v)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (u.first == v.first) <span class="keyword">return</span> u.second &lt; v.second;</span><br><span class="line"><span class="keyword">return</span> u &gt; v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; solution(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; answers) &#123;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; answer;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; tmp;</span><br><span class="line"></span><br><span class="line">tmp.push_back(make_pair(count1(answers), <span class="number">1</span>));</span><br><span class="line">tmp.push_back(make_pair(count2(answers), <span class="number">2</span>));</span><br><span class="line">tmp.push_back(make_pair(count3(answers), <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 내림차순 정렬(점수를 기준), 같은 경우 번호 오름차순</span></span><br><span class="line">sort(tmp.<span class="built_in">begin</span>(), tmp.<span class="built_in">end</span>(), compare);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 점수가 같은 경우 순서대로 추가</span></span><br><span class="line"><span class="keyword">if</span> (tmp[<span class="number">0</span>].first == tmp[<span class="number">1</span>].first) &#123;</span><br><span class="line">answer.push_back(tmp[<span class="number">0</span>].second);</span><br><span class="line">answer.push_back(tmp[<span class="number">1</span>].second);</span><br><span class="line"><span class="keyword">if</span> (tmp[<span class="number">1</span>].first == tmp[<span class="number">2</span>].first)</span><br><span class="line">answer.push_back(tmp[<span class="number">2</span>].second);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123; <span class="comment">// 점수가 다른 경우 가장 높은 사람만 추가</span></span><br><span class="line">answer.push_back(tmp[<span class="number">0</span>].second);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-모의고사&quot;&gt;&lt;a href=&quot;#프로그래머스-모의고사&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 모의고사&quot;&gt;&lt;/a&gt;프로그래머스 - 모의고사&lt;/h1&gt;&lt;h2 id=&quot;모의고사&quot;&gt;&lt;a href=&quot;#모의고사&quot; cla
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - 예산</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/14/programmers_43162/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/14/programmers_43162/</id>
    <published>2020-04-14T14:51:12.000Z</published>
    <updated>2020-04-15T16:00:38.175Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-예산"><a href="#프로그래머스-예산" class="headerlink" title="프로그래머스 - 예산"></a>프로그래머스 - 예산</h1><h2 id="예산"><a href="#예산" class="headerlink" title="예산"></a>예산</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>국가의 역할 중 하나는 여러 지방의 예산요청을 심사하여 국가의 예산을 분배하는 것입니다. 국가예산의 총액은 미리 정해져 있어서 모든 예산요청을 배정해 주기는 어려울 수도 있습니다. 그래서 정해진 총액 이하에서 가능한 한 최대의 총 예산을 다음과 같은 방법으로 배정합니다.</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 모든 요청이 배정될 수 있는 경우에는 요청한 금액을 그대로 배정합니다.</span><br><span class="line"><span class="number">2</span>. 모든 요청이 배정될 수 없는 경우에는 특정한 정수 상한액을 계산하여 그 이상인 예산요청에는 모두 상한액을 배정합니다.</span><br><span class="line">   상한액 이하의 예산요청에 대해서는 요청한 금액을 그대로 배정합니다.</span><br></pre></td></tr></table></figure><p>예를 들어, 전체 국가예산이 485이고 4개 지방의 예산요청이 각각 120, 110, 140, 150일 때, 상한액을 127로 잡으면 위의 요청들에 대해서 각각 120, 110, 127, 127을 배정하고 그 합이 484로 가능한 최대가 됩니다.<br>각 지방에서 요청하는 예산이 담긴 배열 budgets과 총 예산 M이 매개변수로 주어질 때, 위의 조건을 모두 만족하는 상한액을 return 하도록 solution 함수를 작성해주세요.</p><h3 id="제한-사항"><a href="#제한-사항" class="headerlink" title="제한 사항"></a>제한 사항</h3><p>지방의 수는 3 이상 100,000 이하인 자연수입니다.<br>각 지방에서 요청하는 예산은 1 이상 100,000 이하인 자연수입니다.<br>총 예산은 지방의 수 이상 1,000,000,000 이하인 자연수입니다.</p><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>budgets    M    return<br>[120, 110, 140, 150]    485    127</p><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/43237" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/43237</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>지원한 예산중 최댓값을 right로, left를 1로 하여 이분 탐색을 수행한다.</li><li>check함수에서 현재 값으로 예산을 맞출 수 있다면 true, 아니라면 false를 리턴한다.<ul><li>현재 상한액보다 예산 요청 값이 작으면 예산 요청 값을, 상한액 이상이면 상한액을 누적한다.</li><li>누적된 값이 전체 예산보다 작거나 같은지 판별한다.</li></ul></li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; budgets, <span class="keyword">int</span> M, <span class="keyword">int</span> mid)</span> </span>&#123;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; budgets.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (mid &gt; budgets[i]) &#123;</span><br><span class="line">sum += budgets[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">sum += mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum &lt;= M; <span class="comment">// 현재 값으로 예산을 맞출 수 있는지 확인</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; budgets, <span class="keyword">int</span> M)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> right = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 지원한 예산중 최댓값을 right로 지정</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; budgets.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (right &lt; budgets[i]) right = budgets[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> left = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 이분 탐색</span></span><br><span class="line"><span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line"><span class="keyword">int</span> mid = (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (check(budgets, M, mid)) &#123;</span><br><span class="line">answer = mid;</span><br><span class="line">left = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">right = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-예산&quot;&gt;&lt;a href=&quot;#프로그래머스-예산&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - 예산&quot;&gt;&lt;/a&gt;프로그래머스 - 예산&lt;/h1&gt;&lt;h2 id=&quot;예산&quot;&gt;&lt;a href=&quot;#예산&quot; class=&quot;headerli
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 - 스프링 시큐리티(Spring Security)</title>
    <link href="https://kyu9341.github.io/java/2020/04/14/java_springBootSecurity/"/>
    <id>https://kyu9341.github.io/java/2020/04/14/java_springBootSecurity/</id>
    <published>2020-04-14T14:12:28.000Z</published>
    <updated>2020-04-14T14:35:41.438Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-스프링-시큐리티-Spring-Security"><a href="#스프링-부트-스프링-시큐리티-Spring-Security" class="headerlink" title="스프링 부트 - 스프링 시큐리티(Spring Security)"></a>스프링 부트 - 스프링 시큐리티(Spring Security)</h2><ul><li>스프링 시큐리티는 사용자를 인증(Authentication)하고, 로그인후 프로그램의 각각의 기능에 대한 권한을 체크(Authorization)하는 작업을 구현해둔 보안 프레임워크 이다.</li><li>간단하게 스프링 부트에서 스프링 시큐리티를 연동해보자.</li></ul><ul><li>의존성 추가<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-security.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>스프링 시큐리티와 시큐리티 테스트, 타임리프 의존성을 추가한다.</li></ul><hr><ul><li><p><code>Application.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Application<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>HomeController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/my"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">my</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"my"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>WebSecurityConfig.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>WebSecurityConfigurerAdapter</code>를 상속받아 시큐리티 관련 설정을 할 수 있다.</p></li></ul><hr><ul><li><code>index.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/hello"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/my"</span>&gt;</span>my page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>hello.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><code>my.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>My<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>위와 같이 코드를 작성하고 Spring Security의존성이 추가된 상태로 애플리케이션을 실행하게 되면 다음과 같은 화면으로 이동한다.</p><div style="width: 380px; height: 350px;">  <img src="https://kyu9341.github.io/img/security1.png" style="width: 380px; height: 350px;"></div></li><li><p>어떤 페이지를 요청하여도 <code>/login</code>으로 이동하게 되며 로그인을 해야 다른 페이지를 사용 가능하다.</p><ul><li>기본 ID는 user이고 password는 다음과 같이 콘솔에 출력되는 것을 입력하면 된다.(password는 매번 달라진다.)<div style="width: 590px; height: 70px;">  <img src="https://kyu9341.github.io/img/security2.png" style="width: 590px; height: 70px;"></div></li></ul></li><li><p>로그인을 하면 다음과 같이 index화면으로 넘어가게 된다.</p><div style="width: 260px; height: 220px;">  <img src="https://kyu9341.github.io/img/security3.png" style="width: 260px; height: 220px;"></div></li></ul><hr><ul><li>테스트 코드 <code>HomeControllerTest.java</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">WebMvcTest</span>(<span class="title">HomeController</span>.<span class="title">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">HomeControllerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello_without_user</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">"/hello"</span>))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isUnauthorized());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@WithMockUser</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">"/hello"</span>))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isOk())</span><br><span class="line">                .andExpect(view().name(<span class="string">"hello"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@WithMockUser</span> <span class="comment">// 가짜 유저 인증 정보</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">my</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">"/my"</span>))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isOk())</span><br><span class="line">                .andExpect(view().name(<span class="string">"my"</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>@WithMockUser</code>는 가짜 유저 인증 정보를 추가할 수 있다. Spring Security의존성을 추가하고 어노테이션을 붙이지 않은 상태로 테스트를 한다면 인증되지 않았다는 에러 메세지가 발생하지만 <code>@WithMockUser</code>로 인증 정보를 추가한 메서드는 정상적으로 동작한다.</li><li><code>hello_without_user</code>는 어노테이션을 붙이지 않았으므로 인증되지 않았다는 401 상태 코드를 응답받는다.</li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-스프링-시큐리티-Spring-Security&quot;&gt;&lt;a href=&quot;#스프링-부트-스프링-시큐리티-Spring-Security&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 - 스프링 시큐리티(Spring Secur
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>프로그래머스 - k번째 수</title>
    <link href="https://kyu9341.github.io/algorithm/2020/04/14/programmers_42748/"/>
    <id>https://kyu9341.github.io/algorithm/2020/04/14/programmers_42748/</id>
    <published>2020-04-14T13:01:12.000Z</published>
    <updated>2020-04-14T15:12:05.917Z</updated>
    
    <content type="html"><![CDATA[<h1 id="프로그래머스-k번째-수"><a href="#프로그래머스-k번째-수" class="headerlink" title="프로그래머스 - k번째 수"></a>프로그래머스 - k번째 수</h1><h2 id="k번째-수"><a href="#k번째-수" class="headerlink" title="k번째 수"></a>k번째 수</h2><h3 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h3><p>배열 array의 i번째 숫자부터 j번째 숫자까지 자르고 정렬했을 때, k번째에 있는 수를 구하려 합니다.</p><p>예를 들어 array가 [1, 5, 2, 6, 3, 7, 4], i = 2, j = 5, k = 3이라면</p><ol><li>array의 2번째부터 5번째까지 자르면 [5, 2, 6, 3]입니다.</li><li>1에서 나온 배열을 정렬하면 [2, 3, 5, 6]입니다.</li><li>2에서 나온 배열의 3번째 숫자는 5입니다.</li></ol><p>배열 array, [i, j, k]를 원소로 가진 2차원 배열 commands가 매개변수로 주어질 때, commands의 모든 원소에 대해 앞서 설명한 연산을 적용했을 때 나온 결과를 배열에 담아 return 하도록 solution 함수를 작성해주세요.</p><h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><ul><li>array의 길이는 1 이상 100 이하입니다.</li><li>array의 각 원소는 1 이상 100 이하입니다.</li><li>commands의 길이는 1 이상 50 이하입니다.</li><li>commands의 각 원소는 길이가 3입니다.</li></ul><h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><p>array    commands    return<br>[1, 5, 2, 6, 3, 7, 4]    [[2, 5, 3], [4, 4, 1], [1, 7, 3]]    [5, 6, 3]</p><ul><li>입출력 예 설명<br>[1, 5, 2, 6, 3, 7, 4]를 2번째부터 5번째까지 자른 후 정렬합니다. [2, 3, 5, 6]의 세 번째 숫자는 5입니다.<br>[1, 5, 2, 6, 3, 7, 4]를 4번째부터 4번째까지 자른 후 정렬합니다. [6]의 첫 번째 숫자는 6입니다.<br>[1, 5, 2, 6, 3, 7, 4]를 1번째부터 7번째까지 자릅니다. [1, 2, 3, 4, 5, 6, 7]의 세 번째 숫자는 3입니다.</li></ul><h3 id="문제-링크"><a href="#문제-링크" class="headerlink" title="문제 링크"></a>문제 링크</h3><p><a href="https://programmers.co.kr/learn/courses/30/lessons/42748" target="_blank" rel="external nofollow noopener noreferrer">https://programmers.co.kr/learn/courses/30/lessons/42748</a></p><h3 id="solve"><a href="#solve" class="headerlink" title="solve"></a>solve</h3><ul><li>주어지는 구간의 원소들을 담을 벡터(tmp)를 생성하여 현재 구간의 원소를 모두 담는다.</li><li>tmp를 오름차순 정렬하여 정렬된 구간에서 k번째 수를 answer벡터에 추가한다.</li></ul><h3 id="코드-설명"><a href="#코드-설명" class="headerlink" title="코드 설명"></a>코드 설명</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; solution(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="built_in">array</span>, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; commands) &#123;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; answer;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp; <span class="comment">// 이번 구간의 원소들을 담을 벡터</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; commands.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = commands[i][<span class="number">0</span>] - <span class="number">1</span>; j &lt; commands[i][<span class="number">1</span>]; j++) &#123;</span><br><span class="line">tmp.push_back(<span class="built_in">array</span>[j]);</span><br><span class="line">&#125;</span><br><span class="line">sort(tmp.<span class="built_in">begin</span>(), tmp.<span class="built_in">end</span>()); <span class="comment">// 현재 구간 정렬</span></span><br><span class="line">answer.push_back(tmp[commands[i][<span class="number">2</span>] - <span class="number">1</span>]); <span class="comment">// 정렬된 구간에서의 k번째 수 삽입</span></span><br><span class="line">tmp.<span class="built_in">clear</span>(); <span class="comment">// 초기화</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;프로그래머스-k번째-수&quot;&gt;&lt;a href=&quot;#프로그래머스-k번째-수&quot; class=&quot;headerlink&quot; title=&quot;프로그래머스 - k번째 수&quot;&gt;&lt;/a&gt;프로그래머스 - k번째 수&lt;/h1&gt;&lt;h2 id=&quot;k번째-수&quot;&gt;&lt;a href=&quot;#k번째-
      
    
    </summary>
    
    
      <category term="algorithm" scheme="https://kyu9341.github.io/categories/algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 - 데이터베이스 초기화</title>
    <link href="https://kyu9341.github.io/java/2020/04/14/java_springBootDBinit/"/>
    <id>https://kyu9341.github.io/java/2020/04/14/java_springBootDBinit/</id>
    <published>2020-04-14T10:12:28.000Z</published>
    <updated>2020-04-14T11:40:10.701Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-데이터베이스-초기화"><a href="#스프링-부트-데이터베이스-초기화" class="headerlink" title="스프링 부트 - 데이터베이스 초기화"></a>스프링 부트 - 데이터베이스 초기화</h2><h4 id="JPA를-사용한-데이터베이스-초기화"><a href="#JPA를-사용한-데이터베이스-초기화" class="headerlink" title="JPA를 사용한 데이터베이스 초기화"></a>JPA를 사용한 데이터베이스 초기화</h4><ul><li><code>appication.properties</code><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.driverClassName</span>=<span class="string">org.mariadb.jdbc.Driver</span></span><br><span class="line"><span class="comment"># database명이 springboot이다.</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mariadb://localhost:3307/springboot</span></span><br><span class="line"><span class="comment"># 자신의 userid (루트 계정이라면 root)</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">userid</span></span><br><span class="line"><span class="comment"># 자신의 password</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">password</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.jpa.hibernate.ddl-auto</span>=<span class="string">update</span></span><br><span class="line"><span class="comment"># 기본값 : false</span></span><br><span class="line"><span class="meta">spring.jpa.generate-ddl</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.jpa.show-sql</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure></li><li><strong>spring.jpa.hibernate.ddl-auto</strong> 의 옵션에는 다음과 같은 값들을 넣을 수 있다.<ul><li><code>update</code> : 기존의 스키마를 유지하며 JPA에 의해 변경된 부분만 추가한다.</li><li><code>validate</code> : 엔티티와 테이블이 정상적으로 매핑되어있는지만 검증한다.</li><li><code>create</code> : 기존에 존재하는 스키마를 삭제하고 새로 생성한다.</li><li><code>create-drop</code> : 스키마를 생성하고 애플리케이션이 종료될 때 삭제한다.</li><li><code>none</code> : 초기화 동작을 하지 않는다.</li></ul></li><li><strong>spring.jpa.generate-ddl</strong> 은 위의 <strong>spring.jpa.hibernate.ddl-auto</strong> 속성을 사용할지 말지를 결정하는 옵션이다. 기본값이 false이기 JPA에 의한 자동 초기화 기능을 사용하려면 true로 바꾸고 사용한다.</li><li><strong>spring.jpa.show-sql</strong> 를 true로 하면 JPA가 생성한 SQL문을 보여준다.</li></ul><hr><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.jpa.hibernate.ddl-auto</span>=create</span><br><span class="line"><span class="attr">spring.jpa.generate-ddl</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">spring.jpa.show-sql</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li>다음 이미지는 위와 같이 설정을 주고 실행한 결과이다.</li></ul><div style="width: 1050px; height: 120px;">    <img src="https://kyu9341.github.io/img/dbinit1.png" style="width: 1050px    ; height: 120px;"></div><ul><li>기존에 존재하는 테이블이 drop되고 새로운 테이블이 생성되는 것을 볼 수 있다.</li></ul><hr><ul><li><p>서비스 운영 시에는 다음과 같은 설정을 주로 사용한다.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.jpa.hibernate.ddl-auto</span>=validate</span><br><span class="line"><span class="attr">spring.jpa.generate-ddl</span>=<span class="literal">false</span></span><br><span class="line"><span class="attr">spring.jpa.show-sql</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>위와 같이 설정한 후 아래와 같이 기존 스키마를 가지는 Account클래스에 email필드를 추가한다.</p><div style="width: 450px; height: 50px;">  <img src="https://kyu9341.github.io/img/dbinit3.png" style="width: 450px; height: 50px;"></div></li><li><p>다시 서버를 실행하면 다음과 같은 에러가 발생한다.</p></li></ul><div style="width: 1200px; height: 150px;">    <img src="https://kyu9341.github.io/img/dbinit2.png" style="width: 1200px; height: 150px;"></div>- account 테이블에 email컬럼을 찾을 수 없다고 하고 애플리케이션이 바로 종료되는 것을 볼 수 있다.<hr><ul><li><p>이번에는 다음과 같이 설정하고 실행해보자.(개발할 때만 이런 설정을 주로 한다고 한다.)</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.jpa.hibernate.ddl-auto</span>=update</span><br><span class="line"><span class="attr">spring.jpa.generate-ddl</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">spring.jpa.show-sql</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>다음과 같이 테이블에 email 컬럼이 추가되어 alter 가 적용된 것을 볼 수 있다.</p><div style="width: 600px; height: 100px;">  <img src="https://kyu9341.github.io/img/dbinit4.png" style="width: 600px; height: 100px;"></div></li></ul><div style="width: 600px; height: 80px;">    <img src="https://kyu9341.github.io/img/dbinit5.png" style="width: 550px; height: 50px;"></div><ul><li>위와 같이 변경 사항이 적용된 것을 볼 수 있다. 하지만 이미 존재하는 컬럼의 이름을 바꾸는 것은 JPA가 자동으로 업데이트 해주지는 않는다.</li></ul><ul><li><code>Account.java</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="comment">// @GeneratedValue : Primary Key의 값을 자동 생성하기 위해 명시하는데 사용되는 어노테이션</span></span><br><span class="line">    <span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">     <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Account account = (Account) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(id, account.id) &amp;&amp;</span><br><span class="line">                Objects.equals(username, account.username) &amp;&amp;</span><br><span class="line">                Objects.equals(password, account.password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id, username, password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="SQL-스크립트를-사용한-데이터베이스-초기화"><a href="#SQL-스크립트를-사용한-데이터베이스-초기화" class="headerlink" title="SQL 스크립트를 사용한 데이터베이스 초기화"></a>SQL 스크립트를 사용한 데이터베이스 초기화</h4><ul><li><p>다음과 같이 schema.sql 또는 schema-${platform}.sql 과 같은 파일을 생성하여 자동으로 데이터베이스를 초기화할 수 있다.</p></li><li><p><code>resources/schema.sql</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">account</span> <span class="keyword">if</span> <span class="keyword">exists</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">sequence</span> <span class="keyword">if</span> <span class="keyword">exists</span> hibernate_sequence</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> hibernate_sequence <span class="keyword">start</span> <span class="keyword">with</span> <span class="number">1</span> <span class="keyword">increment</span> <span class="keyword">by</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">account</span> (<span class="keyword">id</span> <span class="built_in">bigint</span> <span class="keyword">not</span> <span class="literal">null</span>, email <span class="built_in">varchar</span>(<span class="number">255</span>), <span class="keyword">password</span> <span class="built_in">varchar</span>(<span class="number">255</span>), username <span class="built_in">varchar</span>(<span class="number">255</span>), primary <span class="keyword">key</span> (<span class="keyword">id</span>))</span><br></pre></td></tr></table></figure></li><li><p>위와 같이 SQL 스크립트 파일로 초기화를 한다면 아래와 같이 <code>application.properties</code>를 설정해도 스프링 부트에서 자동으로 <code>schema.sql</code>의 sql을 실행하기 때문에 테이블이 삭제되었다가 다시 생성된다.</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.jpa.hibernate.ddl-auto</span>=validate</span><br><span class="line"><span class="attr">spring.jpa.generate-ddl</span>=<span class="literal">false</span></span><br><span class="line"><span class="attr">spring.jpa.show-sql</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a><br><a href="https://engkimbs.tistory.com/794?category=767865" target="_blank" rel="external nofollow noopener noreferrer">https://engkimbs.tistory.com/794?category=767865</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-데이터베이스-초기화&quot;&gt;&lt;a href=&quot;#스프링-부트-데이터베이스-초기화&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 - 데이터베이스 초기화&quot;&gt;&lt;/a&gt;스프링 부트 - 데이터베이스 초기화&lt;/h2&gt;&lt;h4 id=&quot;J
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 - Spring-Data-JPA</title>
    <link href="https://kyu9341.github.io/java/2020/04/14/java_springBootJPA/"/>
    <id>https://kyu9341.github.io/java/2020/04/14/java_springBootJPA/</id>
    <published>2020-04-13T15:12:28.000Z</published>
    <updated>2020-04-14T11:39:58.006Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-Spring-Data-JPA"><a href="#스프링-부트-Spring-Data-JPA" class="headerlink" title="스프링 부트 - Spring-Data-JPA"></a>스프링 부트 - Spring-Data-JPA</h2><h4 id="ORM과-JPA"><a href="#ORM과-JPA" class="headerlink" title="ORM과 JPA"></a>ORM과 JPA</h4><ul><li><p><strong>ORM(Object-Relational Mapping)</strong></p><ul><li>객체와 릴레이션을 맵핑할 때 발생하는 개념적 불일치를 해결하는 프레임워크</li><li>객체와 DB의 테이블이 매핑을 이루는 것. 즉, 객체가 테이블이 되도록 매칭시키는 것을 말한다.</li><li>ORM을 이용하면 SQL Query가 아닌 직관적인 코드, 메소드로서 데이터를 조작할 수 있다.</li></ul></li><li><p><strong>JPA(Java Persistence API)</strong> : ORM을 위한 자바 (EE) 표준</p><ul><li>자바 ORM기술에 대한 API표준 명세를 말한다.</li><li>JPA는 ORM을 사용하기 위한 인터페이스를 모아둔 것이며, JPA를 구현한 Hibernate, EclipeLink, DataNucleus같은 ORM프레임 워크를 사용해야 한다.</li></ul></li><li><p>Spring-Data-JPA는 JPA를 쉽게 사용하기 위해 스프링에서 제공하는 프레임 워크이다.</p><ul><li>추상화 정도 : Spring-Data-JPA -&gt; JPA -&gt; Hibernate -&gt; DataSource (구체화)<ul><li>DataSource : 스프링과 연결된 DB를 연결하는 인터페이스</li></ul></li></ul></li></ul><h4 id="Spring-Data-JPA-연동-MariaDB"><a href="#Spring-Data-JPA-연동-MariaDB" class="headerlink" title="Spring-Data-JPA 연동 (MariaDB)"></a>Spring-Data-JPA 연동 (MariaDB)</h4><ul><li><p>의존성 추가</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mariadb.jdbc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mariadb-java-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>H2 데이터베이스를 추가하는 이유는 인메모리 데이터베이스로서 테스트를 위해 사용된다.</p></li><li><p><code>appication.properties</code> 마리아 DB 설정 추가</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.driverClassName</span>=<span class="string">org.mariadb.jdbc.Driver</span></span><br><span class="line"><span class="comment"># database명이 springboot이다.</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mariadb://localhost:3307/springboot</span></span><br><span class="line"><span class="comment"># 자신의 userid (루트 계정이라면 root)</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">userid</span></span><br><span class="line"><span class="comment"># 자신의 password</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>소스 코드</p></li><li><p><code>SpringbootjpaApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootjpaApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootjpaApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>account/Account.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kwon.springbootjpa.account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="comment">// @GeneratedValue : Primary Key의 값을 자동 생성하기 위해 명시하는데 사용되는 어노테이션</span></span><br><span class="line">    <span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">     <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Account account = (Account) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(id, account.id) &amp;&amp;</span><br><span class="line">                Objects.equals(username, account.username) &amp;&amp;</span><br><span class="line">                Objects.equals(password, account.password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id, username, password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>@Entity</code> : 엔티티 클래스임을 지정하며 DB 테이블과 매핑하는 객체를 나타내는 어노테이션.</p><ul><li>DB상에서 table로서 표현</li></ul></li><li><p><code>@Id</code> : entity의 PRIMARY KEY를 나타냄</p></li><li><p><code>@GeneratedValue</code> : PRIMARY KEY의 값을 자동 생성하기 위해 명시하는 어노테이션</p></li><li><p><code>AccountRepository.java</code> 인터페이스</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;Entity Type, Id Type&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Account</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// 해당 db의 username에 대한 객체를 반환</span></span><br><span class="line">    <span class="function">Account <span class="title">findByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>AccountRepository의 구현체를 따로 작성하지 않아도 Spring-Data-JPA가 자동적으로 Username의 객체를 받아 자동적으로 DB Table과 매핑한다.</p></li></ul><ul><li><code>AccountRepositoryTest.java</code> 테스트 코드<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line">@DataJpaTest // 슬라이싱 테스트 : Repository와 관련된 빈들만 등록을 하여 테스트를 만드는 것</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountRepositoryTest</span> </span>&#123; <span class="comment">// 슬라이싱 테스트에서는 인메모리 데이터베이스가 필요</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AccountRepository accountRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">di</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>(Connection connection = dataSource.getConnection())&#123;</span><br><span class="line">            DatabaseMetaData metaData = connection.getMetaData();</span><br><span class="line">            System.out.println(metaData.getURL());</span><br><span class="line">            System.out.println(metaData.getDriverName());</span><br><span class="line">            System.out.println(metaData.getUserName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accountTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Account account = <span class="keyword">new</span> Account();</span><br><span class="line">        account.setUsername(<span class="string">"kwon"</span>);</span><br><span class="line">        account.setPassword(<span class="string">"1234"</span>);</span><br><span class="line"></span><br><span class="line">        Account newAccount = accountRepository.save(account);</span><br><span class="line"></span><br><span class="line">        assertThat(newAccount).isNotNull();</span><br><span class="line"></span><br><span class="line">        Account existingAccount = accountRepository.findByUsername(newAccount.getUsername());</span><br><span class="line">        assertThat(existingAccount).isNotNull();</span><br><span class="line"></span><br><span class="line">        Account nonExistingAccount = accountRepository.findByUsername(<span class="string">"kyu"</span>);</span><br><span class="line">        assertThat(nonExistingAccount).isNull();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>@DataJpaTest</code> : 슬라이싱 테스트 시 필요한 빈을 등록시키고 의존성을 추가한다.</li><li><code>@DataJpaTest</code>를 통한 테스트 시에는 H2 인메모리 데이터베이스를 사용하고, <code>@SpringBootTest</code>를 사용하여 테스트를 하는 경우 모든 테스트에 필요한 빈을 등록하므로 MariaDB를 사용한다.</li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a><br><a href="https://victorydntmd.tistory.com/195" target="_blank" rel="external nofollow noopener noreferrer">https://victorydntmd.tistory.com/195</a><br><a href="https://engkimbs.tistory.com/790?category=767865" target="_blank" rel="external nofollow noopener noreferrer">https://engkimbs.tistory.com/790?category=767865</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-Spring-Data-JPA&quot;&gt;&lt;a href=&quot;#스프링-부트-Spring-Data-JPA&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 - Spring-Data-JPA&quot;&gt;&lt;/a&gt;스프링 부트 - Spring-Da
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 - DBCP, MariaDB 연동하기</title>
    <link href="https://kyu9341.github.io/java/2020/04/13/java_springBootMariaDB/"/>
    <id>https://kyu9341.github.io/java/2020/04/13/java_springBootMariaDB/</id>
    <published>2020-04-13T10:12:28.000Z</published>
    <updated>2020-04-13T13:09:46.193Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-DBCP-MariaDB-연동하기"><a href="#스프링-부트-DBCP-MariaDB-연동하기" class="headerlink" title="스프링 부트 - DBCP, MariaDB 연동하기"></a>스프링 부트 - DBCP, MariaDB 연동하기</h2><h4 id="DBCP"><a href="#DBCP" class="headerlink" title="DBCP"></a>DBCP</h4><ul><li><strong>DBCP(Database Connection Pool)</strong> : DataBase와 Connection을 맺고 있는 객체를 관리하기 위한 Connection</li><li>DB와 연결된 커넥션(connection)을 미리 생성해서 풀(pool)속에 저장해두고 있다가 필요할 때 가져다 쓰고 반환한다.</li><li>미리 생성해두기 때문에 데이터베이스에 부하를 줄이고 유동적으로 연결을 관리할 수 있다.</li><li>DBCP는 애플리케이션의 성능에 큰 영향을 미친다.</li><li>스프링 부트는 HikariCP를 기본 DBCP로 사용한다.</li></ul><hr><h4 id="MariaDB-연동"><a href="#MariaDB-연동" class="headerlink" title="MariaDB 연동"></a>MariaDB 연동</h4><ul><li><p>MariaDB는 설치가 되어있다고 가정하고 진행한다.</p></li><li><p>의존성 추가(MariaDB)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mariadb.jdbc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mariadb-java-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>appication.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 커넥션 객체의 최대 수를 4개로 설정하겠다는 의미</span></span><br><span class="line"><span class="meta">spring.datasource.hikari.maximum-pool-size</span>=<span class="string">4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.datasource.driverClassName</span>=<span class="string">org.mariadb.jdbc.Driver</span></span><br><span class="line"><span class="comment"># database명이 springboot이다.</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mariadb://localhost:3307/springboot</span></span><br><span class="line"><span class="comment"># 자신의 userid (루트 계정이라면 root)</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">userid</span></span><br><span class="line"><span class="comment"># 자신의 password</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure></li><li><p><code>SpringbootjdbcApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootjdbcApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootjdbcApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>MariaDBRunner.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>(Connection connection = dataSource.getConnection())&#123;</span><br><span class="line">            System.out.println(dataSource.getClass()); <span class="comment">// 어떤 DBCP를 사용하는지 확인</span></span><br><span class="line">            System.out.println(connection.getMetaData().getURL());</span><br><span class="line">            System.out.println(connection.getMetaData().getUserName());</span><br><span class="line"></span><br><span class="line">            Statement statement = connection.createStatement();</span><br><span class="line">            String sql = <span class="string">"CREATE TABLE USER(ID INTEGER NOT NULL, name VARCHAR(255), PRIMARY KEY (id))"</span>;</span><br><span class="line">            statement.executeUpdate(sql);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        jdbcTemplate.execute(<span class="string">"INSERT INTO USER VALUES (1, 'kwon')"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>MySQL Client (MariaDB 10.4 (x64))</code>를 사용하여 접속하여 확인하면 다음과 같이 생성한 테이블과 삽입한 행을 확인할 수 있다.</p></li></ul><div style="width: 358px; height: 155px;">    <img src="https://kyu9341.github.io/img/maria1.png" style="width: 358px    ; height: 155px;"></div><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-DBCP-MariaDB-연동하기&quot;&gt;&lt;a href=&quot;#스프링-부트-DBCP-MariaDB-연동하기&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 - DBCP, MariaDB 연동하기&quot;&gt;&lt;/a&gt;스프링 부트 - DB
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 - 인메모리 데이터베이스</title>
    <link href="https://kyu9341.github.io/java/2020/04/13/java_springBootInmemoryDB/"/>
    <id>https://kyu9341.github.io/java/2020/04/13/java_springBootInmemoryDB/</id>
    <published>2020-04-13T05:12:28.000Z</published>
    <updated>2020-04-13T06:01:33.875Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-인메모리-데이터베이스"><a href="#스프링-부트-인메모리-데이터베이스" class="headerlink" title="스프링 부트 - 인메모리 데이터베이스"></a>스프링 부트 - 인메모리 데이터베이스</h2><ul><li><p>인메모리 데이터베이스는 애플리케이션 서버의 메모리를 이용하는 데이터베이스 시스템이다.</p><ul><li>데이터베이스 서버가 꺼지게 되면 저장된 데이터가 모두 사라진다.</li></ul></li><li><p>스프링 부트가 지원하는 인-메모리 데이터베이스는 다음과 같이 세가지가 있다.</p><ul><li>H2</li><li>HSQL</li><li>Derby</li></ul></li><li><p>Spring-JDBC가 클래스패스에 있으면 자동 설정이 필요한 빈을 설정해준다.</p><ul><li>DataSource  </li><li>JdbcTemplate</li></ul></li><li><p>의존성 추가</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>H2 db를 의존성에 추가하고 다른 설정을 하지 않으면 자동으로 H2 db를 기본 데이터베이스로 채택한다.</p></li><li><p>spring-boot-starter-jdbc 의존성을 추가하면 DataSource, JdbcTemplate를 빈 주입으로 사용 가능하다.</p></li></ul><hr><ul><li><p><code>SpringbootjdbcApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootjdbcApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootjdbcApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>ApplicationRunner.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">H2Runner</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>(Connection connection = dataSource.getConnection())&#123;</span><br><span class="line">            System.out.println(connection.getMetaData().getURL());</span><br><span class="line">            System.out.println(connection.getMetaData().getUserName());</span><br><span class="line"></span><br><span class="line">            Statement statement = connection.createStatement();</span><br><span class="line">            String sql = <span class="string">"CREATE TABLE USER(ID INTEGER NOT NULL, name VARCHAR(255), PRIMARY KEY (id))"</span>;</span><br><span class="line">            statement.executeUpdate(sql);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        jdbcTemplate.execute(<span class="string">"INSERT INTO USER VALUES (1, 'kwon')"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>dataSource를 사용하여 H2에 접속해 쿼리를 수행한다.</p></li><li><p>jdbcTemplate을 사용하면 좀 더 편리하게 쿼리를 작성할 수 있다.</p></li><li><p><code>application.properties</code>에 <code>spring.h2.console.enabled=true</code>를 추가하면 h2콘솔을 이용할 수 있다.</p></li><li><p><code>http://localhost:8080/h2-console</code>로 접속하여 아래와 같이 JDBC URL을 <code>jdbc:h2:mem:testdb</code>로 입력하고 connect를 누르면 접속할 수 있다.</p></li></ul><div style="width: 450px; height: 310px;">    <img src="https://kyu9341.github.io/img/jdbc_1.png" style="width: 450px    ; height: 310px;"></div><ul><li>위의 소스 코드에서 작성한 쿼리문이 실행되어 USER테이블이 생성되고 하나의 행이 정상적으로 삽입된 것을 볼 수 있다.<div style="width: 540px; height: 300px;">  <img src="https://kyu9341.github.io/img/jdbc_2.png" style="width: 540px  ; height: 300px;"></div></li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-인메모리-데이터베이스&quot;&gt;&lt;a href=&quot;#스프링-부트-인메모리-데이터베이스&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 - 인메모리 데이터베이스&quot;&gt;&lt;/a&gt;스프링 부트 - 인메모리 데이터베이스&lt;/h2&gt;&lt;ul&gt;

      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 웹 MVC - CORS(Cross-Origin Resource Sharing)</title>
    <link href="https://kyu9341.github.io/java/2020/04/13/java_springBootCORS/"/>
    <id>https://kyu9341.github.io/java/2020/04/13/java_springBootCORS/</id>
    <published>2020-04-13T01:12:28.000Z</published>
    <updated>2020-04-13T05:57:05.180Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-CORS-Cross-Origin-Resource-Sharing"><a href="#스프링-부트-CORS-Cross-Origin-Resource-Sharing" class="headerlink" title="스프링 부트 - CORS(Cross-Origin Resource Sharing)"></a>스프링 부트 - CORS(Cross-Origin Resource Sharing)</h2><ul><li><p><strong>Origin</strong> : 아래의 세 가지 요소를 조합한 것을 하나의 Origin이라고 한다.</p><ul><li>URI 스키마(http, https)</li><li>hostname(localhost 등..)</li><li>포트(8080, 18080 .. )</li></ul></li><li><p><strong>Single-Origin Policy</strong> 에서는 하나의 Origin이 다른 Origin을 서로 호출할 수 없다.</p></li><li><p>예를 들어, REST api를 제공하는 서버가 <a href="http://localhost:8080" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080</a> 에서 제공이 되고, 그 REST api를 <a href="http://localhost:18080" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:18080</a> 을 사용하는 application이 호출할 수 없다.</p></li><li><p>Cross-Origin Resource Sharing 에서는 위와 같이 동일한 Origin이 아니더라도 서로 다른 Origin에서 자원을 요청하여 사용할 수 있게 해준다.</p></li><li><p>CORS을 적용하려면 웹 어플리케이션에 그에 따른 처리를 해야하고 스프링 부트에서는 <code>@CrossOrigin</code> 어노테이션 혹은 WebConfig를 통해 CORS를 적용하는 방법을 제공한다.</p></li></ul><h4 id="Single-Origin-Policy"><a href="#Single-Origin-Policy" class="headerlink" title="Single-Origin Policy"></a>Single-Origin Policy</h4><ul><li><p>두 개의 프로젝트롤 생성하여 하나는 서버로써 REST api를 간단하게 만들어 호출할 수 있도록 하고, 하나는 클라이언트로써 ajax를 통해 다른 Origin에서 자원을 요청하도록 만든다.</p></li><li><p>서버측 소스 <code>SpringcorsserverApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringcorsserverApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringcorsserverApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>/hello</code>로 요청을 보내면 Hello를 응답하는 api이다.</p></li></ul><hr><ul><li>클라이언트측 소스</li><li><code>application.properties</code>에 <code>server.port=18080</code>를 추가한다.</li><li><code>SpringcorsclientApplication.java</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringcorsclientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringcorsclientApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>index.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>CORS Client<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/webjars/jquery/3.4.1/dist/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        $.ajax(<span class="string">"http://localhost:8080/hello"</span>)</span></span><br><span class="line"><span class="actionscript">            .done(<span class="function"><span class="keyword">function</span> <span class="params">(msg)</span> </span>&#123;</span></span><br><span class="line">                alert(msg);</span><br><span class="line">            &#125;)</span><br><span class="line"><span class="actionscript">            .fail(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">"fail"</span>)</span></span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><code>http://localhost:8080/hello</code>로 ajax로 요청을 보내 성공했다면 응답받은 메세지를, 실패했다면 fail을 표시한다.</li></ul><div style="width: 900px; height: 120px;">    <img src="https://kyu9341.github.io/img/cors1.png" style="width: 900px    ; height: 120px;"></div><div style="width: 800px; height: 50px;">    <img src="https://kyu9341.github.io/img/cors2.png" style="width: 800px    ; height: 50px;"></div><ul><li>위와 같이 실패했다는 메세지와 함께 오류가 발생한 것을 볼 수 있다.</li><li><code>Access-Control-Allow-Origin</code>라는 해더를 서버가 보내주어야 한다. (어떤 Origin이 접근할 수 있는지 알려주는 해더)</li></ul><h4 id="CORS-적용-CrossOrigin"><a href="#CORS-적용-CrossOrigin" class="headerlink" title="CORS 적용 - @CrossOrigin"></a>CORS 적용 - @CrossOrigin</h4><ul><li>서버측 소스 <code>SpringcorsserverApplication.java</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringcorsserverApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CrossOrigin</span>(origins = <span class="string">"http://localhost:18080"</span>)</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringcorsserverApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><code>@CrossOrigin(origins = &quot;http://localhost:18080&quot;)</code>와 같이 어노테이션을 추가하여 허용할 Origin을 작성하면 된다.</li></ul><div style="width: 900px; height: 120px;">    <img src="https://kyu9341.github.io/img/cors3.png" style="width: 900px    ; height: 120px;"></div>- 이번에는 Hello라는 응답이 정상적으로 출력되는 것을 볼 수 있다.<h4 id="CORS-적용-WepConfig"><a href="#CORS-적용-WepConfig" class="headerlink" title="CORS 적용 - WepConfig"></a>CORS 적용 - WepConfig</h4><ul><li><p>설정을 위와 같이 어노테이션으로 모든 메소드에 하기 힘들다면 WepConfig 라는 설정파일을 작성하여 설정할 수 있다.</p></li><li><p>서버측 소스 <code>WebConfig.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">                .allowedOrigins(<span class="string">"http://localhost:18080"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>/**</code> : 모든 <code>http://localhost:18080</code>를 포함한 요청을 허용하도록 한다.</p></li><li><p>위와 같이 설정파일을 만들어서 사용하면 글로벌한 설정으로 cors를 적용할 수 있다.</p></li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-CORS-Cross-Origin-Resource-Sharing&quot;&gt;&lt;a href=&quot;#스프링-부트-CORS-Cross-Origin-Resource-Sharing&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 - C
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 웹 MVC - HATEOAS(Hypermedia As The Engine Of Application State)</title>
    <link href="https://kyu9341.github.io/java/2020/04/13/java_springBootHATEOAS/"/>
    <id>https://kyu9341.github.io/java/2020/04/13/java_springBootHATEOAS/</id>
    <published>2020-04-13T00:12:28.000Z</published>
    <updated>2020-04-13T05:56:33.713Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-HATEOAS-Hypermedia-As-The-Engine-Of-Application-State"><a href="#스프링-부트-HATEOAS-Hypermedia-As-The-Engine-Of-Application-State" class="headerlink" title="스프링 부트 - HATEOAS(Hypermedia As The Engine Of Application State)"></a>스프링 부트 - HATEOAS(Hypermedia As The Engine Of Application State)</h2><ul><li>링크에 사용 가능한 URL을 리소스로 전달하여 client가 참고하여 사용할 수 있도록 하는 것</li><li>HATEOAS는 RESTful API를 사용하는 클라이언트가 전적으로 서버에 의해 동적으로 상호작용을 할 수 있다.<ul><li>클라이언트가 서버에 요청시 서버는 요청에 의존되는 URI를 Response에 포함시켜 반환한다.</li></ul></li></ul><h3 id="REST-API"><a href="#REST-API" class="headerlink" title="REST API"></a>REST API</h3><ul><li>REST API는 Representational State Transfer API의 약자로, 간단히 설명하면 웹 애플리케이션이 제공하는 각각의 데이터를 리소스, 즉 자원으로 간주하고 각각의 자원에 고유한 URI(Uniform Resource Identifier)를 할당함으로써 이를 표현하는 API를 정의하기 위한 소프트웨어 아키텍처 스타일이다.</li></ul><hr><ul><li><p>의존성 추가</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-hateoas<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>테스트 코드</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">WebMvcTest</span>(<span class="title">SampleController</span>.<span class="title">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SampleControllerTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">"/hello"</span>))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isOk())</span><br><span class="line">                .andExpect(jsonPath(<span class="string">"$._links.self"</span>).exists());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>_links</code>는 HEATEOAS를 구현하기 위해 스프링 부트에서 생성한 JSON name이다. 그 뒤의 self는 자기 참조를 뜻하는 것을 JSON을 통해서 나타낸 것이다.</p></li></ul><hr><ul><li><p>소스 코드</p></li><li><p><code>DemospringhateoasApplication.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemospringhateoasApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(DemospringhateoasApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>Hello.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String prefix;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPrefix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrefix</span><span class="params">(String prefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.prefix = prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prefix+ <span class="string">" "</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>SampleController.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> EntityModel&lt;Hello&gt; <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Hello hello = <span class="keyword">new</span> Hello();</span><br><span class="line">        hello.setPrefix(<span class="string">"Hey, "</span>);</span><br><span class="line">        hello.setName(<span class="string">"Kwon"</span>);</span><br><span class="line"></span><br><span class="line">        EntityModel&lt;Hello&gt; helloEntityModel = <span class="keyword">new</span> EntityModel&lt;&gt;(hello);</span><br><span class="line">        helloEntityModel.add(linkTo(methodOn(SampleController<span class="class">.<span class="keyword">class</span>).<span class="title">hello</span>()).<span class="title">withSelfRel</span>())</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> helloEntityModel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>EntityModel 객체에 HATEOAS를 구현하기 위해 <code>/hello</code> URL의 링크 정보를 추가한다.</p></li><li><p>withSelfRel 메소드로 해당 URL이 자기 참조인 것을 나타낸다.</p></li></ul><p><code>Body = {&quot;prefix&quot;:&quot;Hey, &quot;,&quot;name&quot;:&quot;Kwon&quot;,&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;http://localhost/hello&quot;}}}</code></p><ul><li>테스트를 돌려보면 다음과 같이 추가된 링크 정보가 출력되는 것을 볼 수 있다.</li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-HATEOAS-Hypermedia-As-The-Engine-Of-Application-State&quot;&gt;&lt;a href=&quot;#스프링-부트-HATEOAS-Hypermedia-As-The-Engine-Of-Application-State
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 웹 MVC - ExceptionHandler</title>
    <link href="https://kyu9341.github.io/java/2020/04/12/java_springBootException/"/>
    <id>https://kyu9341.github.io/java/2020/04/12/java_springBootException/</id>
    <published>2020-04-12T06:12:28.000Z</published>
    <updated>2020-04-13T05:56:31.861Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-ExceptionHandler"><a href="#스프링-부트-ExceptionHandler" class="headerlink" title="스프링 부트 ExceptionHandler"></a>스프링 부트 ExceptionHandler</h2><ul><li>스프링 부트는 에러 핸들러기 기본적으로 등록이 되어있다.</li><li>스프링 부트가 제공하는 기본 예외 처리기<ul><li>BasicErrorController<ul><li>HTML과 JSON 응답 지원</li></ul></li><li>커스터마이징 방법<ul><li>EroorController구현</li></ul></li></ul></li></ul><hr><h4 id="소스-코드"><a href="#소스-코드" class="headerlink" title="소스 코드"></a>소스 코드</h4><ul><li>SpringbootexceptionApplication.java<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootexceptionApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootexceptionApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>SampleException.java<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>AppError.java : Exception발생 시 해당 Exception에 대한 정보를 저장</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppError</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String reason;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getReason</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> reason;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReason</span><span class="params">(String reason)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.reason = reason;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>SampleController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> SampleException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(SampleException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> @<span class="title">ResponseBody</span> <span class="title">AppError</span> <span class="title">sampleError</span>(<span class="title">SampleException</span> <span class="title">e</span>)</span>&#123;</span><br><span class="line">        AppError appError = <span class="keyword">new</span> AppError();</span><br><span class="line">        appError.setMessage(<span class="string">"error.app.key"</span>);</span><br><span class="line">        appError.setReason(<span class="string">"IDK IDK IDK"</span>);</span><br><span class="line">        <span class="keyword">return</span> appError;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>/hello 라는 요청이 들어오면 SampleException을 발생시킨다.</p><ul><li>@ExceptionHandler 어노테이션이 해당 예외를 받아서 처리</li></ul></li><li><p>appError객체에 메시지를 넣고 반환한다. (JSON형식)</p></li></ul><div style="width: 400px; height: 120px;">    <img src="https://kyu9341.github.io/img/exception1.png" style="width: 400px    ; height: 120px;"></div>- 위와 같이 JSON형태로 반환되는 것을 볼 수 있다.<h3 id="커스텀-에러-페이지"><a href="#커스텀-에러-페이지" class="headerlink" title="커스텀 에러 페이지"></a>커스텀 에러 페이지</h3><ul><li>상태 코드 값에 따라 에러 페이지 보여줄 수 있다.</li><li>src/main/resources/(static or templates)/error/ 와 같은 경로에 html파일을 작성하면 된다.<ul><li>이때, 404와 같이 파일명이 상태 코드와 같거나 5xx같이 패턴을 맞추어 파일명을 만들어야 한다.</li></ul></li></ul><hr><ul><li>위에서 작성했던 SampleController에서 @ExceptionHandler 부분을 주석으로 변경하여 500번대 에러를 발생시킬 수 있도록 한다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleController</span> </span>&#123;</span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> SampleException();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*    @ExceptionHandler(SampleException.class)</span></span><br><span class="line"><span class="comment">  public @ResponseBody AppError sampleError(SampleException e)&#123;</span></span><br><span class="line"><span class="comment">      AppError appError = new AppError();</span></span><br><span class="line"><span class="comment">      appError.setMessage("error.app.key");</span></span><br><span class="line"><span class="comment">      appError.setReason("IDK IDK IDK");</span></span><br><span class="line"><span class="comment">      return appError;</span></span><br><span class="line"><span class="comment">  &#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p>resources/static/ 의 경로에 다음과 같이 html파일을 작성한다.</p></li><li><p><code>404.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>404<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><div style="width: 400px; height: 120px;">  <img src="https://kyu9341.github.io/img/exception2.png" style="width: 400px  ; height: 120px;"></div></li><li><p><code>/</code>에 대한 페이지를 작성하지 않았기 때문에 Not Found(404)에러가 발생하여 404.html이 반환된 것을 확인할 수 있다.</p></li></ul><hr><ul><li><code>5xx.html</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>5xx<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><div style="width: 400px; height: 120px;">    <img src="https://kyu9341.github.io/img/exception3.png" style="width: 400px    ; height: 120px;"></div><ul><li><code>/hello</code> 요청을 보내면 예외를 발생시키도록 작성해두었으므로 500번대 서버 에러가 발생하여 5xx.html 이 반환된 것을 볼 수 있다.</li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-ExceptionHandler&quot;&gt;&lt;a href=&quot;#스프링-부트-ExceptionHandler&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 ExceptionHandler&quot;&gt;&lt;/a&gt;스프링 부트 ExceptionH
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 웹 MVC - Thymeleaf, HtmlUnit</title>
    <link href="https://kyu9341.github.io/java/2020/04/12/java_springBootThymeleaf/"/>
    <id>https://kyu9341.github.io/java/2020/04/12/java_springBootThymeleaf/</id>
    <published>2020-04-12T02:12:28.000Z</published>
    <updated>2020-04-13T05:56:49.095Z</updated>
    
    <content type="html"><![CDATA[<h2 id="스프링-부트-Thymeleaf-HtmlUnit"><a href="#스프링-부트-Thymeleaf-HtmlUnit" class="headerlink" title="스프링 부트 Thymeleaf, HtmlUnit"></a>스프링 부트 Thymeleaf, HtmlUnit</h2><h3 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h3><ul><li>스프링 부트가 자동 설정을 지원하는 템플릿 엔진<ul><li>FreeMarker</li><li>Groovy</li><li>Thymeleaf</li><li>Mustche</li></ul></li><li>스프링 부트에서 JSP를 권장하지 않는 이유<ul><li>스프링 부트는 독립적으로 실행가능한 임베디드 톰캣으로 애플리케이션을 빠르고 쉽게 만들어서 배포하길 바란다.</li><li>JSP를 사용하면 JAR 패키징 할 때는 동작하지 않고, WAR 패키징을 해야 한다.</li><li>Undertow는 JSP를 지원하지 않는다.</li></ul></li></ul><hr><ul><li><p>기본적으로 자동설정이 적용이 되면 동적으로 생성되는 뷰는 resources/templates에서 찾게 된다.</p></li><li><p>Thymeleaf를 사용하려면 다음과 같은 의존성을 추가해야 한다.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li>테스트 코드 작성<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">WebMvcTest</span>(<span class="title">SampleController</span>.<span class="title">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SampleControllerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 요청 "/hello"</span></span><br><span class="line">        <span class="comment">// - 응답 모델 name : kwon</span></span><br><span class="line">        <span class="comment">// - 뷰 이름 : hello</span></span><br><span class="line">        <span class="comment">// 뷰의 이름과 모델의 데이터, 렌더링 된 결과를 확인하는 테스트</span></span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">"/hello"</span>))</span><br><span class="line">                .andExpect(status().isOk())</span><br><span class="line">                .andDo(print()) <span class="comment">// 렌더링 결과 확인 (타임리프라 가능)</span></span><br><span class="line">                .andExpect(view().name(<span class="string">"hello"</span>)) <span class="comment">// 뷰의 이름</span></span><br><span class="line">                .andExpect(model().attribute(<span class="string">"name"</span>, is(<span class="string">"kwon"</span>))) <span class="comment">// 모델의 데이터</span></span><br><span class="line">                .andExpect(content().string(containsString(<span class="string">"kwon"</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>뷰의 이름과 모델의 데이터, 렌더링 된 결과를 확인하는 테스트</li><li>Thymeleaf에서 렌더링한 HTML을 확인할 수 있다.</li></ul><hr><ul><li>소스 코드 작성</li><li>SpringbootmvcApplication.java<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringbootmvcApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringbootmvcApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>SampleController.java<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 여기서 리턴하는 String은 뷰의 이름</span></span><br><span class="line">        <span class="comment">// @RestController가 아니기 때문에 응답의 본문을 리턴하는 것이 아님</span></span><br><span class="line">        <span class="comment">// 데이터는 model에 담음</span></span><br><span class="line">        model.addAttribute(<span class="string">"name"</span>, <span class="string">"kwon"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>Model 객체에 name:kwon 을 추가</li></ul><hr><ul><li>템플릿 작성</li><li>resources/tamplates/hello.html<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--xml 네임스페이스를 추가해야함(th)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">"$&#123;name&#125;"</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li>Thymeleaf를 사용하려면 <code>xmlns:th=&quot;http://www.thymeleaf.org&quot;</code>를 추가하는 것이 반드시 필요한다.</li><li>값을 성공적으로 받아온다면 <code>${name}</code>에 넘어온 kwon이 출력될 것이고, 아니라면 Name가 출력될 것이다.</li></ul><div style="width: 400px; height: 120px;">    <img src="https://kyu9341.github.io/img/thymeleaf1.png" style="width: 400px    ; height: 120px;"></div><hr><h3 id="HtmlUnit"><a href="#HtmlUnit" class="headerlink" title="HtmlUnit"></a>HtmlUnit</h3><ul><li>HtmlUnit : HTML을 단위테스트 하기 위한 툴</li><li>템플릿 뷰 테스트에 유용</li></ul><ul><li><p>다음과 같은 htmlunit 의존성을 추가한다. (scope이 테스트 이므로 테스트할 때만 사용)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.seleniumhq.selenium<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>htmlunit-driver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sourceforge.htmlunit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>htmlunit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>테스트 코드</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">@<span class="title">WebMvcTest</span>(<span class="title">SampleController</span>.<span class="title">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SampleControllerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    WebClient webClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        HtmlPage page = webClient.getPage(<span class="string">"/hello"</span>);</span><br><span class="line">        HtmlHeading1 h1 = page.getFirstByXPath(<span class="string">"//h1"</span>);</span><br><span class="line">        assertThat(h1.getTextContent()).isEqualToIgnoringCase(<span class="string">"kwon"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>h1태그의 정보를 얻어서 테스트를 수행한다.</p></li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;스프링-부트-Thymeleaf-HtmlUnit&quot;&gt;&lt;a href=&quot;#스프링-부트-Thymeleaf-HtmlUnit&quot; class=&quot;headerlink&quot; title=&quot;스프링 부트 Thymeleaf, HtmlUnit&quot;&gt;&lt;/a&gt;스프링 부트 Thy
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
  <entry>
    <title>스프링 부트 웹 MVC - Index 페이지와 파비곤(Favicon)</title>
    <link href="https://kyu9341.github.io/java/2020/04/11/java_springBootIndexFavicon/"/>
    <id>https://kyu9341.github.io/java/2020/04/11/java_springBootIndexFavicon/</id>
    <published>2020-04-11T02:12:28.000Z</published>
    <updated>2020-04-12T03:41:44.745Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Index-페이지와-파비곤-Favicon"><a href="#Index-페이지와-파비곤-Favicon" class="headerlink" title="Index 페이지와 파비곤(Favicon)"></a>Index 페이지와 파비곤(Favicon)</h2><ul><li><p><strong>웰컴 페이지</strong> : 애플리케이션 root로 요청을 했을 때 보여주는 페이지. 정적 페이지로 index를 보여주는 방법은 기본 리소스 위치에(resources/static/ 등..) index.html파일을 두면 애플리케이션이 해당 html을 반환한다.</p></li><li><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">Welcome!! Spring Boot~!!</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>루트 페이지 방문 시</p><div style="width: 500px; height: 100px;">  <img src="https://kyu9341.github.io/img/static4.png" style="width: 500px  ; height: 100px;"></div></li><li><p><strong>파비콘(Favicon)</strong> : 파비콘은 웹페이지에 접속했을때, 상단 탭에 보여지는 아이콘을 일컫는다. 이 아이콘은 즐겨찾기에 웹페이지를 등록할때도 사용된다. 웹사이트를 대표하는 로고(logo)의 개념과 비슷하며, 사이트의 성격을 드러내기도 한다.</p></li></ul><p><a href="https://favicon.io/" target="_blank" rel="external nofollow noopener noreferrer">https://favicon.io/</a><br>위의 웹 사이트에서 파비콘을 만들 수 있다.</p><ul><li>만든 파비콘을 index.html이 있는 경로에 같이 둔다.(/static/favicon.ico)</li></ul><div style="width: 450px; height: 150px;">    <img src="https://kyu9341.github.io/img/static5.png" style="width: 450px    ; height: 150px;"></div><ul><li>만약 파비콘이 제대로 나오지 않는다면 ide를 재시작 해보고, <a href="http://localhost:8080/favicon.ico" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080/favicon.ico</a> 로 직접 요청 후에 서버를 재시작하면 제대로 동작할 수도 있다.</li><li>그래도 안된다면 모든 브라우저를 닫고 다시 시작하여 접속해보자. (나는 이렇게 해서 됐다.)</li></ul><blockquote><p>참조<br><a href="https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard" target="_blank" rel="external nofollow noopener noreferrer">https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8/dashboard</a><br><a href="https://webdir.tistory.com/337" target="_blank" rel="external nofollow noopener noreferrer">https://webdir.tistory.com/337</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Index-페이지와-파비곤-Favicon&quot;&gt;&lt;a href=&quot;#Index-페이지와-파비곤-Favicon&quot; class=&quot;headerlink&quot; title=&quot;Index 페이지와 파비곤(Favicon)&quot;&gt;&lt;/a&gt;Index 페이지와 파비곤(Favi
      
    
    </summary>
    
    
      <category term="java" scheme="https://kyu9341.github.io/categories/java/"/>
    
    
  </entry>
  
</feed>
